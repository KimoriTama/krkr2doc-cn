<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
<!-- generated by to_html.pl from Plugins.xml -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>プラグインについて</title>
	<meta name="author" content="W.Dee" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<meta http-equiv="Content-Script-Type" content="text/javascript" />
	<link href="../../css/browser.css" type="text/css" rel="stylesheet" title="吉里吉里Reference用 标准Title" />
	<link href="../../index.html" target="_top" rel="Start" title="首页" />
    <link href="mailto:dee@kikyou.info" rev="Made" />
</head>
<body>
<h1><a id="id206" name="id206">什么是插件</a>
</h1><div class="para"><div>
	　连接吉里吉里，用于扩展吉里吉里的功能。<br />
	　现阶段，吉里吉里可使用的插件种类有三种，<br />
<ul><li>Susie Plug-in (图像加载和归档访问)</li><li>用于扩展WaveSoundBuffer可播放格式的插件</li><li>其他吉里吉里专用插件</li></ul>　<br />
<br />
　如果使用插件，则必须使用 <a target="main" class="jump" href="../Class Reference/Plugins/f_Plugins_link.html">Plugins.link</a> 方法连接到吉里本体。<br />
</div></div>

<h1><a id="id207" name="id207">插件的检索</a>
</h1><div class="para"><div>
<!-- 　<a target="main" class="jump" href="../Class Reference/Plugins/f_Plugins_link.html">Plugins.link</a> メソッドでは、指定されたプラグインを以下の順序で探します。<br />
<ol><li>吉里吉里本体と同じフォルダ</li><li>吉里吉里本体以下と同じフォルダにある plugin フォルダ内</li><li>自動検索パス</li></ol><br />
　自動検索パスが、アーカイブ内などローカルファイルとしてアクセスできない場所にあると、吉里吉里はプラグインを<em>吉里吉里本体と同じフォルダ</em>に展開しようとします。これが問題を起こすことがあるため、プラグインは「吉里吉里本体と同じフォルダ」か「吉里吉里本体以下と同じフォルダにある plugin フォルダ内」に置くことを<em>強く推奨します</em>。<br />
　また、吉里吉里の設定ツール ( Releaser や krkrconf.exe、-userconf オプション、エンジン設定.exe ) は、プラグインごとの埋め込みオプションの情報を収集するためにプラグインを探しますが、以下の順序で探します。<br />
<ol><li>吉里吉里本体と同じフォルダ</li><li>吉里吉里本体以下と同じフォルダにある plugin フォルダ内</li></ol><br />
　吉里吉里の設定ツールは自動検索パスまでは検索しないため、設定項目を含むプラグインは「吉里吉里本体と同じフォルダ」か「吉里吉里本体以下と同じフォルダにある plugin フォルダ内」に置かなければなりません。<br /> -->

<a target="main" class="jump" href="../Class Reference/Plugins/f_Plugins_link.html">Plugins.link</a>
方法按以下顺序查找指定的插件。<br />
<ol>
	<li>与吉里吉里本体相同的文件夹</li>
	<li>吉里吉里本体同文件夹的plugin文件夹中</li>
	<li>自动搜索路径</li>
</ol><br />
 中。
 　如果自动搜索路径、归档文件内等不能作为本地文件访问的地方，吉里吉里就会将插件解压到与<em>吉里吉里本体相同的文件夹</em>中。因为这会引起问题，所以<em>强烈推荐</em>将插件放置在“与吉里吉里本体相同的文件夹”或“与吉里吉里本体相同文件夹下的plugin文件夹内”。<br />
 　此外，吉里吉里的配置工具 ( Releaser 和 krkrconf.exe、-userconf 选项、エンジン設定.exe )将查找插件，以收集每个插件的嵌入选项信息，但按以下顺序查找。<br />
<ol>
	<li>与吉里吉里本体相同的文件夹</li>
	<li>与吉里吉里本体相同文件夹下的plugin文件夹</li>
</ol><br />
　由于吉里吉里的配置工具不会搜索自动搜索路径，因此包含配置项的插件必须位于“与吉里吉里本体相同的文件夹”或“与吉里吉里本体相同文件夹下的plugin文件夹”中。<br />
</div>
</div>
<h1><a id="id208" name="id208">插件的自动读入</a>
</h1><div class="para"><div>
<!-- 　吉里吉里はプラグインを自動的に検索して起動時に読み込む機能があります。自動的にプラグインを読み込ませたい場合は、プラグインの拡張子を dll から tpm に変更する必要があります。<br />
　吉里吉里は起動時 (startup.tjsを実行する直前) に、以下のフォルダから拡張子 tpm のファイルを探し、プラグインとして自動的に読み込みます。<br />
<ul><li>吉里吉里本体と同じフォルダ</li><li>吉里吉里本体以下と同じフォルダにある plugin フォルダ内</li></ul><br />
　吉里吉里は探したプラグインを名前で昇順に並び替え、その順序でプラグインを読み込みます。たとえば、aaa.tpm は aab.tpm よりも先に読み込まれます。これはプラグインのおいてあるフォルダには影響せず、プラグインの名前にのみ影響されます (吉里吉里本体と同じフォルダに z.tpm があっても、plugin フォルダ内に a.tpm があれば a.tpm が先に読み込まれます )。プラグインの読み込み順序を規定したい場合は、プラグインのファイル名を変える必要があります。<br /> -->

吉里吉里有自动搜索插件并在启动时加载插件的功能。如果要自动加载插件，则必须将插件扩展名从dll更改为tpm。<br />
　吉里吉里在启动时（就在运行startup.tjs之前）从下面的文件夹中查找扩展名为tpm的文件，并将其作为插件自动加载。<br />
<ul>
	<li>与吉里吉里本体相同的文件夹</li>
	<li>与吉里吉里本体相同文件夹下的plugin文件夹</li>
</ul><br />
　插件所在的文件夹不会影响顺序，而只有插件的名称会影响（z.tpm与吉里吉里本体所在的文件夹相同，但如果plugin文件夹中有a.tpm，则会先加载a.tpm）。如果要定义插件的加载顺序，则必须更改插件的文件名。<br />
</div>
</div>
<h1><a id="id209" name="id209">关于插件的制作</a>
</h1><div class="para"><div>
<!-- 　吉里吉里のソース中に、吉里吉里付属のプラグインのソースがありますので参考にしてみてください。<br />
　現段階では、「その他の吉里吉里専用のプラグイン」の仕様は<em>固まっていません</em>。将来仕様が変更されても、ソースレベルでの互換性は保たれるとおもうので、バイナリレベルでの互換性が失われた場合でも、吉里吉里本体に合わせて再構築すれば使えるようになるとは思います。<br /> -->
　在吉里吉里的源码中，有吉里吉里附属的插件的源码，请参考一下。<br />
　现阶段，“其他吉里吉里专用插件”的标准并没有<em>固定下来</em>。我认为即使将来标准被变更，在源代码级别的兼容性被保持，即使在二进制级别的兼容性丢失的情况下，配合吉里吉里本体重新生成的话也能使用。<br />
</div></div>
<h1><a id="id210" name="id210">关于 Susie Plug-in </a>
</h1><div class="para"><div>
<!-- 　Takechin 氏作の画像ビューア「Susie32」用のプラグインを利用することができます。<br />
　00IN 形式 (画像用プラグイン) と 00AM 形式 (アーカイブ用プラグイン) を使うことができますが、以下の制限、あるいは吉里吉里独自の仕様があります。<br />
<br />
<ul><li>吉里吉里は拡張子で画像の形式を判断するため、本来の拡張子 ( GetPluginInfo 関数が返すもの ) と違う拡張子がついたような画像に対応できない ( アーカイブは対応形式をすべてチェックするので拡張子が異なっていても OK )</li><li>32bpp のビットマップはアルファチャンネル付きのビットマップとして見なされる</li><li>一部、受け付けられないビットマップ形式がある (RLE 圧縮された物や BITFIELDS が指定されているものなど )</li><li>Susie プラグイン経由での画像読み込みやアーカイブアクセスは、吉里吉里がネイティブに扱う画像形式や xp3 アーカイブに比べてパフォーマンスがかなり低くなる</li><li>アーカイブ中のファイルはメモリ上に展開されるため、大きなファイルを扱うには不向き</li><li>アーカイブ内アーカイブには未対応</li><li>Mac binary には未対応</li></ul><br />
　また、Susie plug-in の規格に完全に対応していないプラグインの中には、吉里吉里と相性の悪いプラグインも存在します。<br /> -->

您可以使用Takechin氏的Susie32图像查看器插件。<br />
　您可以使用00IN格式（图像插件）和00AM格式（归档插件），但有以下限制，以及吉里吉里自己的规范。<br />
<br />
<ul>
	<li>吉里吉里以扩展名来判断图像的格式，因此无法处理扩展名与原始扩展名（由GetPluginInfo函数返回）不同的图像（归档文件会检查所有支持的格式，因此扩展名不同也OK）</li>
	<li>32bpp位图被视为具有Alpha通道的位图</li>
	<li>某些位图格式不接受（例如，RLE压缩或指定了BITFIELDS）</li>
	<li>通过Susie插件进行图像加载和归档访问的性能明显低于吉里吉里本体图像格式和xp3归档</li>
	<li>归档文件中的文件将解压缩到内存中，不适合处理大型文件</li>
	<li>不支持归档文件中的归档文件</li>
	<li>不支持Mac二进制</li>
</ul><br />
　此外，一些不完全符合Susie plug-in标准的插件也与吉里吉里格格不入。<br />
</div></div>
<h1><a id="id211" name="id211">关于吉里吉里附属的插件</a>
</h1><div class="para"><div>
	　这是附加到标准吉里吉里的插件说明。<br />
<br />
<dl>
<dt><a id="id212" name="id212" class="targanchor"><dfn>wuvorbis.dll</dfn></a></dt>
<dd>　让<a id="id213" name="id213" class="targanchor"><dfn>OggVorbis</dfn></a> 在吉里吉里播放的插件。</dd>
<dt><a id="id214" name="id214" class="targanchor"><dfn>wumsadp.dll</dfn></a></dt>
<dd>　此插件允许吉里吉里播放<a id="id215" name="id215" class="targanchor"><dfn>Microsoft ADPCM</dfn></a> 格式的.wav文件。</dd>
<dt><a id="id216" name="id216" class="targanchor"><dfn>wutcwf.dll</dfn></a></dt>
<dd>　这是一个允许吉里吉里播放<a id="id217" name="id217" class="targanchor"><dfn>TCWF</dfn></a> 格式文件的插件。</dd>
<dt><a id="id218" name="id218" class="targanchor"><dfn>extrans.dll</dfn></a></dt>
<dd>　这是一个用于扩展吉里吉里本体渐变类型的插件，连接到吉里吉里本体后可以使用几个渐变。<br />
	　有关如何使用此插件的信息，请参见 <a target="main" class="jump" href="Transition.html">关于层的渐变切换</a> 。</dd>
<dt><a id="id219" name="id219" class="targanchor"><dfn>dirlist.dll</dfn></a></dt>

<!-- <dd>　指定されたディレクトリ内にあるファイルのリストを得るためのプラグインです。<br />
　このプラグインを接続すると <a id="id220" name="id220" class="targanchor"><dfn>getDirList</dfn></a> という関数が使用可能になります。<br />
<code class="inlinecode">getDirList(ディレクトリ)</code><br />
　の形式で指定すると、そのディレクトリ内にあるすべてのファイルのリストを
配列で返してきます。このリストにはディレクトリも含まれ、ディレクトリの場合は
要素の文字列の最後に '/' がついています。<br />
　また、このリストには通常、 './' と '../' の２つの要素が含まれます。<br />
　この関数は指定されたディレクトリ直下のファイルのリストを得るだけで、再帰的に
それよりも下層のディレクトリのファイルを得ることはありません。</dd> -->
<dd>　用于获取指定目录中文件列表的插件。<br />
	　连接此插件后，名为 <a id="id220" name="id220" class="targanchor"><dfn>getDirList</dfn></a> 的函数将可用。<br />
<code class="inlinecode">getDirList(目录)</code><br />
　的形式调用，返回该目录中所有文件的数组。该数组也包括目录，对于该目录，该目录的元素字符串以 '/'结尾。<br />
　此外，此列表通常包含两个元素： './' 和 '../' 。<br />
　此函数只获得指定目录下的文件列表，而不递归获得更低目录中的文件。</dd>

<dt><a id="id221" name="id221" class="targanchor"><dfn>fftgraph.dll</dfn></a></dt>
<!-- <dd>　WaveSoundBuffer と同期して、簡易的なスペクトラムアナライザー（スペアナ）を表示させるための
プラグインです。<br />
　このプラグインを接続すると <a id="id222" name="id222" class="targanchor"><dfn>drawFFTGraph</dfn></a> という関数が使用可能になります。<br />
　使い方は吉里吉里ソースに含まれる fftgraph のソースおよび KAG 用のスペアナプラグインを
参照してください。</dd> -->
<dd>　一个与WaveSoundBuffer 同步并显示简单频谱分析器的插件。<br />
	　连接此插件后，名为<a id="id222" name="id222" class="targanchor"><dfn>drawFFTGraph</dfn></a> 的函数将可用。<br />
	　有关使用方法，请参见吉里吉里源代码中的 fftgraph 源代码和KAG的备用插件。</dd>
<dt><a id="id223" name="id223" class="targanchor"><dfn>win32ole.dll</dfn></a></dt>
<!-- <dd>　ActiveX コントロール吉里吉里のウィンドウに貼り付けたり、OLE オートメーション可能なオブジェクトを吉里吉里から操作するためのプラグインです。<br />
　これを使用すると、たとえば吉里吉里のウィンドウに Web ブラウザ (Internet Explorer) や メディアプレーヤを貼り付けたり、Excel を吉里吉里から操作したりすることができます。<br />
　使用方法については 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs">kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs</a> および <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/win32ole">kirikiri2/trunk/kirikiri2/tests/win32ole</a> 目录。<br /> -->
<dd>　这是一个插件，用于将 ActiveX 控件嵌入到吉里吉里窗口中，或从吉里吉里操作 OLE 自动化对象。<br />
	　例如，您可以将Web浏览器（Internet Explorer）或媒体播放器嵌入到吉里吉里的窗口中，或者从吉里吉里使用Excel。<br />
	　有关使用说明，请参见吉里吉里源码的 <a class="jump"
		href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs">kirikiri2/trunk/kirikiri2/src/plugins/win32/win32ole/manual.tjs</a>
	和 <a class="jump"
		href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/win32ole">kirikiri2/trunk/kirikiri2/tests/win32ole</a>
	。<br />
</dd>
<dt><a id="id224" name="id224" class="targanchor"><dfn>wsh.dll</dfn></a> (experimental)</dt>
<!-- <dd>　吉里吉里で JScript、VBScript、PerlScript を使用可能にするプラグインです (RubyScript の動作については調整中です)。<br />
　このプラグインを接続すると、<a target="main" class="jump" href="../Class Reference/Scripts/f_Scripts_exec.html">Scripts.exec</a> と <a target="main" class="jump" href="../Class Reference/Scripts/f_Scripts_execStorage.html">Scripts.execStorage</a> が拡張されます。<br />
　Scripts.exec は第２引数に 拡張子、あるいは ProgId 、あるいは CLSID を受け付けるようになります。Scripts.execStorage も Scripts.exec 同様に第２引数に拡張子、あるいは ProgId 、あるいは CLSID を受け付けるようになりますが、第２引数が省略された場合は第１引数の拡張子から言語が決定されます。<br />
　拡張子は js, vbs, pl, rb のいずれかで、ProgId は、それぞれ JScript, VBScript, PerlScript, RubyScript となります。CLSID を指定する場合は、スクリプトエンジンのクラスIDを指定します。これら以外の拡張子が渡された場合は TJS スクリプトとして実行します。<br />
　使用方法については 吉里吉里ソースの <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/wsh">kirikiri2/trunk/kirikiri2/tests/wsh</a> 目录。<br />
</dd>
 -->
<dd>　 允许JScript、VBScript和PerlScript在吉里使用的插件（RubyScript行为正在调整中）。<br />
	　连接此插件可扩展<a target="main" class="jump" href="../Class Reference/Scripts/f_Scripts_exec.html">Scripts.exec</a>
	和 <a target="main" class="jump" href="../Class Reference/Scripts/f_Scripts_execStorage.html">Scripts.execStorage</a>。<br />
	　Scripts.exec现在接受扩展名、ProgId或CLSID作为第二个参数。与Scripts.exec一样，Scripts.execStorage将接受扩展名，ProgId或CLSID作为第二个参数，但如果省略第二个自变量，则使用第一个参数的扩展名来确定语言。<br />
	　扩展名为js、vbs、pl或rb，其中ProgId分别为JScript、VBScript、PerlScript或RubyScript。如果指定CLSID，请指定脚本引擎的类ID。如果传递了其他扩展名，则将其作为TJS脚本运行。<br />
	　有关使用说明，请参见吉里吉里源码的 <a class="jump"
		href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/tests/wsh">kirikiri2/trunk/kirikiri2/tests/wsh</a>目录。<br />
</dd>

<dt><a id="id225" name="id225" class="targanchor"><dfn>agg.dll</dfn></a> (experimental)</dt>
<dd>　这是一个在吉里吉里使用 <a class="jump" href="http://www.antigrain.com/">AGG (Anti-Grain Geometry)</a> 绘图的插件。<br />
	　提供简单的SVG导入和绘制功能。<br />
	　要绘制SVG，使用例如下。
<br />
<code class="bq"><span class="weak">例:</span><br />var&nbsp;svg&nbsp;&nbsp;=&nbsp;new&nbsp;AGGPrimitive(layer,&nbsp;&quot;SVG&quot;,&nbsp;&quot;tiger.svg&quot;);<br />
var&nbsp;svg1&nbsp;=&nbsp;new&nbsp;AGGPrimitive(layer,&nbsp;&quot;SVG&quot;,&nbsp;&quot;tiger.svg&quot;);<br />
</code>
<br />

 (由于原始AGG对SVG导入支持的限制，许多SVG无法导入)。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExAgg/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExAgg</a> 目录。<br />
</dd>


<dt><a id="id226" name="id226" class="targanchor"><dfn>csvParser.dll</dfn></a> (experimental)</dt>
<dd>　这是一个用于在吉里吉里导入CSV (Comma Separated Values) 文件的插件。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/csvParser/">kirikiri2/trunk/kirikiri2/src/plugins/win32/csvParser</a> 目录。<br />
</dd>


<dt><a id="id227" name="id227" class="targanchor"><dfn>expat.dll</dfn></a> (experimental)</dt>
<dd>　在吉里吉里通过 <a class="jump" href="http://expat.sourceforge.net/">Expat</a> 导入XML文件的插件。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/expat/">kirikiri2/trunk/kirikiri2/src/plugins/win32/expat</a> 目录。<br />
</dd>


<dt><a id="id228" name="id228" class="targanchor"><dfn>json.dll</dfn></a> (experimental)</dt>
<dd>　这是一个用于在吉里吉里读入<a class="jump" href="http://www.json.org/">JSON</a> 的插件。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/json/">kirikiri2/trunk/kirikiri2/src/plugins/win32/json</a> 目录。<br />
</dd>

<dt><a id="id229" name="id229" class="targanchor"><dfn>layerExImage.dll</dfn></a> (experimental)</dt>
<dd>　用于将亮度和对比度调整、色相和饱和度调整以及噪波添加读入到层的插件。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExImage/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExImage</a> 目录。<br />
</dd>

<dt><a id="id230" name="id230" class="targanchor"><dfn>perspective.dll</dfn></a> (experimental)</dt>
<dd>　一种用于透视层变形的插件。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/layerExPerspective/">kirikiri2/trunk/kirikiri2/src/plugins/win32/layerPerspective</a> 目录。<br />
</dd>


<dt><a id="id231" name="id231" class="targanchor"><dfn>saveStruct.dll</dfn></a></dt>
<dd>允许Array/Dictionary 的 saveStruct 操作在当前代码页或UTF-8中输出，而不是在Unicode（UTF-16）中输出。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/saveStruct/">kirikiri2/trunk/kirikiri2/src/plugins/win32/saveStruct</a> 目录。<br />
</dd>


<dt><a id="id232" name="id232" class="targanchor"><dfn>fstat.dll</dfn></a></dt>
<dd>向Storages类添加一个方法，以获取文件的大小、修改日期和时间等信息，或者从storage系统中检索文件。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/fstat/">kirikiri2/trunk/kirikiri2/src/plugins/win32/fstat</a> 目录。<br />
</dd>

<dt><a id="id233" name="id233" class="targanchor"><dfn>clipboardEx.dll</dfn></a>(experimental)</dt>
<dd>向Clipboard类添加通过剪贴板交换图像和TJS表达式的功能，以及注册处理程序以自动检测剪贴板变更的功能。<br />
　有关更多信息，请参见吉里吉里源码的 <a class="jump" href="https://sv.kikyou.info/trac/kirikiri/browser/kirikiri2/trunk/kirikiri2/src/plugins/win32/clipboardEx/">kirikiri2/trunk/kirikiri2/src/plugins/win32/clipboardEx</a> 目录。<br />
</dd>



</dl><br />
</div></div>
	<script type="text/javascript" charset="UTF-8" src="../../js/documentid.js" ></script>
	<script type="text/javascript" charset="UTF-8" src="../../js/postcontent.js" ></script>
</body>
</html>
